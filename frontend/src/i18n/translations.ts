import type { Language } from '../stores/appStore'

type TranslationTable = Record<string, string>

const ptBR: TranslationTable = {
  'app.loading': 'Inicializando ORCH...',
  'common.theme.dark': 'Dark',
  'common.theme.light': 'Light',
  'common.theme.hacker': 'Hacker',
  'common.theme.nvim': 'Nvim',
  'common.theme.min-dark': 'Min Dark',
  'common.language.ptBR': 'Português (Brasil)',
  'common.language.enUS': 'English (United States)',
  'common.cta.next': 'Próximo',
  'common.cta.back': 'Voltar',
  'common.cta.skip': 'Pular',
  'common.cta.finish': 'Concluir',
  'emptyState.subtitle': 'Orquestrador colaborativo de IA e GitHub',
  'emptyState.newTerminal': 'Novo Terminal',
  'emptyState.newAIAgent': 'AI Agent',
  'emptyState.newGitHub': 'GitHub',
  'emptyState.shortcut.newTerminal': 'Novo terminal',
  'emptyState.shortcut.commandPalette': 'Command palette',
  'emptyState.shortcut.toggleTheme': 'Alternar tema',
  'titlebar.themeToggle.title': 'Tema: {{theme}} (Cmd+Shift+D)',
  'titlebar.themeToggle.aria': 'Mudar tema (atual: {{theme}})',
  'settings.title': 'Configurações',
  'settings.close': 'Fechar configurações',
  'settings.tabs.general': 'Geral',
  'settings.tabs.sync': 'Sincronização',
  'settings.tabs.appearance': 'Aparência',
  'settings.tabs.shortcuts': 'Atalhos',
  'settings.general.title': 'Geral',
  'settings.general.description': 'Configurações gerais do ORCH.',
  'settings.general.language': 'Idioma',
  'settings.general.shell': 'Shell Padrão',
  'settings.general.shell.description': 'O shell que será usado ao abrir novos terminais locais.',
  'settings.general.shell.auto': 'Detectar automaticamente',
  'settings.tabs.github': 'GitHub',
  'settings.general.github.title': 'GitHub',
  'settings.general.github.description': 'Conecte sua conta do GitHub para gerenciar Pull Requests, Issues e Code Reviews diretamente no ORCH.',
  'settings.general.github.connect': 'Conectar com GitHub',
  'settings.general.github.disconnect': 'Desconectar conta',
  'settings.general.github.connectedAs': 'Conectado como {{name}}',
  'settings.github.title': 'Integração GitHub',
  'settings.github.description': 'Conecte sua conta do GitHub para acessar todos os recursos de gerenciamento de código e colaboração em tempo real.',
  'settings.github.connect': 'Conectar com GitHub',
  'settings.github.disconnect': 'Desconectar conta',
  'settings.github.connectDescription': 'Com o GitHub conectado, você terá acesso a todas as funcionalidades de gerenciamento de código dentro do ORCH.',
  'settings.github.capabilities.title': 'O que você pode fazer',
  'settings.github.capabilities.description': 'Com sua conta conectada, você tem acesso completo aos seguintes recursos:',
  'settings.github.features.prs.title': 'Pull Requests',
  'settings.github.features.prs.desc': 'Visualize, crie e gerencie Pull Requests diretamente no ORCH. Acompanhe o status e revise mudanças sem sair do app.',
  'settings.github.features.branches.title': 'Branches',
  'settings.github.features.branches.desc': 'Navegue entre branches do repositório, crie novas branches e faça checkout rápido com um clique.',
  'settings.github.features.comments.title': 'Comentários & Reviews',
  'settings.github.features.comments.desc': 'Adicione comentários em linhas específicas do código, responda a threads e participe de discussões técnicas.',
  'settings.github.features.review.title': 'Code Review Colaborativo',
  'settings.github.features.review.desc': 'Durante sessões P2P, todos os participantes veem o mesmo diff com scroll sincronizado. Anotações aparecem em tempo real.',
  'settings.github.features.merge.title': 'Aprovação & Merge',
  'settings.github.features.merge.desc': 'Aprove Pull Requests e faça merge quando estiverem prontos. Todas as ações são registradas com sua identidade do GitHub.',
  'settings.github.collab.title': 'Colaboração em Sessões P2P',
  'settings.github.collab.description': 'Em sessões colaborativas, cada participante usa suas próprias credenciais do GitHub. Isso garante que comentários, aprovações e merges apareçam com o avatar correto e respeitem as permissões individuais de cada membro da equipe.',
  'settings.github.preview.title': 'Funcionalidades disponíveis:',
  'settings.github.preview.item1': 'Gerenciamento completo de Pull Requests',
  'settings.github.preview.item2': 'Visualização de diffs com syntax highlighting',
  'settings.github.preview.item3': 'Code Reviews colaborativos em tempo real',
  'settings.github.preview.item4': 'Integração com Issues e Kanban',
  'settings.sync.title': 'Sincronização',
  'settings.sync.description': 'Configure como sincronizar com outros participantes durante sessões colaborativas.',
  'settings.appearance.title': 'Aparência',
  'settings.appearance.description': 'Personalize a aparência do ORCH.',
  'settings.appearance.theme': 'Tema',
  'settings.appearance.terminalZoom': 'Zoom do terminal',
  'settings.appearance.terminalZoom.description': 'Ajuste o tamanho da fonte para todos os terminais.',
  'settings.appearance.terminalZoom.increase': 'Aumentar zoom do terminal',
  'settings.appearance.terminalZoom.decrease': 'Diminuir zoom do terminal',
  'settings.appearance.terminalZoom.reset': 'Resetar (⌘0)',
  'onboarding.badge': 'Primeira execução',
  'onboarding.title': 'Configure o ORCH em menos de 2 minutos',
  'onboarding.subtitle': 'Escolha idioma, aparência e comece seu primeiro terminal.',
  'onboarding.step.language.title': 'Escolha seu idioma',
  'onboarding.step.language.description': 'Você pode alterar isso depois em Configurações.',
  'onboarding.step.theme.title': 'Escolha seu tema',
  'onboarding.step.theme.description': 'O tema define a aparência da interface e dos terminais.',
  'onboarding.step.launch.title': 'Tudo pronto para começar',
  'onboarding.step.launch.description': 'Vamos abrir seu primeiro terminal e iniciar o Command Center.',
  'onboarding.step.launch.point1': 'Atalho para novo terminal: ⌘N',
  'onboarding.step.launch.point2': 'Atalho para Command Palette: ⌘K',
  'onboarding.step.launch.point3': 'Atalho para Configurações: ⌘,',
  'onboarding.cta.start': 'Criar meu primeiro terminal',
}

const enUS: TranslationTable = {
  'app.loading': 'Initializing ORCH...',
  'common.theme.dark': 'Dark',
  'common.theme.light': 'Light',
  'common.theme.hacker': 'Hacker',
  'common.theme.nvim': 'Nvim',
  'common.theme.min-dark': 'Min Dark',
  'common.language.ptBR': 'Portuguese (Brazil)',
  'common.language.enUS': 'English (United States)',
  'common.cta.next': 'Next',
  'common.cta.back': 'Back',
  'common.cta.skip': 'Skip',
  'common.cta.finish': 'Finish',
  'emptyState.subtitle': 'Collaborative AI & GitHub orchestrator',
  'emptyState.newTerminal': 'New Terminal',
  'emptyState.newAIAgent': 'AI Agent',
  'emptyState.newGitHub': 'GitHub',
  'emptyState.shortcut.newTerminal': 'New terminal',
  'emptyState.shortcut.commandPalette': 'Command palette',
  'emptyState.shortcut.toggleTheme': 'Toggle theme',
  'titlebar.themeToggle.title': 'Theme: {{theme}} (Cmd+Shift+D)',
  'titlebar.themeToggle.aria': 'Change theme (current: {{theme}})',
  'settings.title': 'Settings',
  'settings.close': 'Close settings',
  'settings.tabs.general': 'General',
  'settings.tabs.sync': 'Sync',
  'settings.tabs.appearance': 'Appearance',
  'settings.tabs.shortcuts': 'Shortcuts',
  'settings.general.title': 'General',
  'settings.general.description': 'General ORCH settings.',
  'settings.general.language': 'Language',
  'settings.general.shell': 'Default Shell',
  'settings.general.shell.description': 'The shell that will be used when opening new local terminals.',
  'settings.general.shell.auto': 'Auto-detect',
  'settings.tabs.github': 'GitHub',
  'settings.general.github.title': 'GitHub',
  'settings.general.github.description': 'Connect your GitHub account to manage Pull Requests, Issues, and Code Reviews directly in ORCH.',
  'settings.general.github.connect': 'Connect with GitHub',
  'settings.general.github.disconnect': 'Disconnect account',
  'settings.general.github.connectedAs': 'Connected as {{name}}',
  'settings.github.title': 'GitHub Integration',
  'settings.github.description': 'Connect your GitHub account to access all code management features and real-time collaboration.',
  'settings.github.connect': 'Connect with GitHub',
  'settings.github.disconnect': 'Disconnect account',
  'settings.github.connectDescription': 'With GitHub connected, you\'ll have access to all code management features within ORCH.',
  'settings.github.capabilities.title': 'What you can do',
  'settings.github.capabilities.description': 'With your account connected, you have full access to the following features:',
  'settings.github.features.prs.title': 'Pull Requests',
  'settings.github.features.prs.desc': 'View, create and manage Pull Requests directly in ORCH. Track status and review changes without leaving the app.',
  'settings.github.features.branches.title': 'Branches',
  'settings.github.features.branches.desc': 'Browse repository branches, create new branches, and quickly checkout with one click.',
  'settings.github.features.comments.title': 'Comments & Reviews',
  'settings.github.features.comments.desc': 'Add comments on specific code lines, reply to threads, and participate in technical discussions.',
  'settings.github.features.review.title': 'Collaborative Code Review',
  'settings.github.features.review.desc': 'During P2P sessions, all participants see the same diff with synchronized scrolling. Annotations appear in real-time.',
  'settings.github.features.merge.title': 'Approval & Merge',
  'settings.github.features.merge.desc': 'Approve Pull Requests and merge when ready. All actions are recorded with your GitHub identity.',
  'settings.github.collab.title': 'Collaboration in P2P Sessions',
  'settings.github.collab.description': 'In collaborative sessions, each participant uses their own GitHub credentials. This ensures comments, approvals, and merges appear with the correct avatar and respect individual team member permissions.',
  'settings.github.preview.title': 'Available features:',
  'settings.github.preview.item1': 'Complete Pull Request management',
  'settings.github.preview.item2': 'Diff viewing with syntax highlighting',
  'settings.github.preview.item3': 'Real-time collaborative Code Reviews',
  'settings.github.preview.item4': 'Issues and Kanban board integration',
  'settings.sync.title': 'Sync',
  'settings.sync.description': 'Choose how to sync with collaborators during shared sessions.',
  'settings.appearance.title': 'Appearance',
  'settings.appearance.description': 'Customize ORCH look and feel.',
  'settings.appearance.theme': 'Theme',
  'settings.appearance.terminalZoom': 'Terminal zoom',
  'settings.appearance.terminalZoom.description': 'Adjust font size for all terminals.',
  'settings.appearance.terminalZoom.increase': 'Increase terminal zoom',
  'settings.appearance.terminalZoom.decrease': 'Decrease terminal zoom',
  'settings.appearance.terminalZoom.reset': 'Reset (⌘0)',
  'onboarding.badge': 'First run',
  'onboarding.title': 'Set up ORCH in under 2 minutes',
  'onboarding.subtitle': 'Pick language, appearance, and start your first terminal.',
  'onboarding.step.language.title': 'Choose your language',
  'onboarding.step.language.description': 'You can change this later in Settings.',
  'onboarding.step.theme.title': 'Choose your theme',
  'onboarding.step.theme.description': 'Theme controls the app and terminal look.',
  'onboarding.step.launch.title': 'Ready to start',
  'onboarding.step.launch.description': 'We will open your first terminal and launch the Command Center.',
  'onboarding.step.launch.point1': 'New terminal shortcut: ⌘N',
  'onboarding.step.launch.point2': 'Command Palette shortcut: ⌘K',
  'onboarding.step.launch.point3': 'Settings shortcut: ⌘,',
  'onboarding.cta.start': 'Create my first terminal',
}

export const translations: Record<Language, TranslationTable> = {
  'pt-BR': ptBR,
  'en-US': enUS,
}

const interpolate = (template: string, params?: Record<string, string | number>): string => {
  if (!params) return template

  return template.replace(/{{\s*([\w.-]+)\s*}}/g, (_, key: string) => {
    const value = params[key]
    return value === undefined ? '' : String(value)
  })
}

export const translate = (
  language: Language,
  key: string,
  params?: Record<string, string | number>
): string => {
  const table = translations[language] ?? translations['pt-BR']
  const fallbackTable = translations['pt-BR']
  const template = table[key] ?? fallbackTable[key] ?? key
  return interpolate(template, params)
}
