# GIT Tasks (Prioridade)

## P0 - Bloqueadores de entrega (sem isso o Git Panel nao entra em producao)

[x] Fechar escopo funcional do v1, limites, nao-metas e criterio de corte claro - [git_specs/product_scope.md](git_specs/product_scope.md)  
[x] Resolver open questions do PRD (nome do pane, commit no v1 vs v1.1, external tool no v1) e registrar decisao oficial - [GIT_PRD.md](GIT_PRD.md)  
[x] Definir decisao de UX oficial: Git Panel em tela dedicada (fora do mosaico de terminais), aberta pelo botao GitHub - [git_specs/product_scope.md](git_specs/product_scope.md)  
[x] Formalizar blueprint de layout inspirado no Git Extensions (View commit log), sem grafos, com branches/refs na esquerda e historico no centro - [git_specs/ux_shortcuts.md](git_specs/ux_shortcuts.md)  
[x] Definir navegacao da tela dedicada (abrir/fechar/voltar), preservando estado dos terminais e workspace ativo - [git_specs/ux_shortcuts.md](git_specs/ux_shortcuts.md)  
[x] Definir estrategia de compatibilidade de pane/layout salvo (`github` legado -> Git Panel) sem quebrar workspaces e snapshots - [git_specs/product_scope.md](git_specs/product_scope.md)  
[x] Remover criacao de novos panes/agentes do tipo `github` e migrar layout legado para novo fluxo de tela dedicada - [git_specs/product_scope.md](git_specs/product_scope.md)  
[x] Definir estrategia de resolucao do `repoPath` ativo (terminal context, workspace path e fallback manual) para evitar write no repo errado - [git_specs/product_scope.md](git_specs/product_scope.md)  
[x] Confirmar plano de fases com gate de entrada/saida por milestone - [git_specs/roadmap_delivery.md](git_specs/roadmap_delivery.md)  
[x] Definir rastreabilidade final de specs e checklist de consistencia do pacote tecnico - [git_specs/README.md](git_specs/README.md)  
[x] Implementar servico de dominio dedicado do Git Panel (separado de `gitactivity`) com responsabilidades de leitura/write/eventos - [git_specs/product_scope.md](git_specs/product_scope.md)  
[x] Implementar contrato inicial dos bindings Wails e DTOs base do Git Panel - [git_specs/api_contract.md](git_specs/api_contract.md)  
[x] Implementar contrato de erro normalizado (`code/message/details`) em todos os bindings do Git Panel - [git_specs/api_contract.md](git_specs/api_contract.md)  
[x] Regenerar e versionar wrappers tipados de frontend (`frontend/wailsjs/*`) apos adicao/ajuste dos bindings - [git_specs/api_contract.md](git_specs/api_contract.md)  
[x] Implementar preflight de runtime (Git CLI disponivel, `repoPath` valido e repo Git acessivel) com erro acionavel - [git_specs/observability_security.md](git_specs/observability_security.md)  
[x] Implementar fila sequencial por repositorio para todos os comandos write - [git_specs/command_queue.md](git_specs/command_queue.md)  
[x] Integrar retries com backoff para erros transientes de `index.lock` - [git_specs/command_queue.md](git_specs/command_queue.md)  
[x] Implementar cancelamento/timeout e shutdown seguro do worker de queue para evitar goroutine presa - [git_specs/command_queue.md](git_specs/command_queue.md)  
[x] Implementar leitura de status (`staged/unstaged/conflicted`) via `git status --porcelain=v1 -z`, incluindo `branch` e `ahead/behind` - [git_specs/working_tree_staging.md](git_specs/working_tree_staging.md)  
[x] Implementar parser de status robusto para rename/copy/conflict (`XY`) sem perda de paths - [git_specs/working_tree_staging.md](git_specs/working_tree_staging.md)  
[x] Implementar acoes write basicas (`stage`, `unstage`, `discard`) por arquivo, sempre via queue - [git_specs/working_tree_staging.md](git_specs/working_tree_staging.md)  
[x] Implementar validacao de `repoPath/filePath` e bloqueio de path traversal - [git_specs/observability_security.md](git_specs/observability_security.md)  
[x] Implementar validacao de seguranca para `patchText` (paths do patch e escopo permitido no repo) - [git_specs/observability_security.md](git_specs/observability_security.md)  
[x] Implementar evento de diagnostico por comando (`queued/started/retried/succeeded/failed`) com `stderr` sanitizado - [git_specs/observability_security.md](git_specs/observability_security.md)  
[x] Definir estrategia de eventos entre `git:*` (legado) e `gitpanel:*` (novo) sem quebrar listeners existentes - [git_specs/api_contract.md](git_specs/api_contract.md)  
[x] Conectar invalidacao de estado por eventos do file watcher (sem polling de status em loop) - [git_specs/filewatcher_integration.md](git_specs/filewatcher_integration.md)  
[x] Implementar reconciliacao leve pos-write para evitar estado inconsistente quando evento for perdido - [git_specs/filewatcher_integration.md](git_specs/filewatcher_integration.md)  
[x] Implementar engine de historico linear no backend com parser robusto por delimitador seguro - [git_specs/history_engine.md](git_specs/history_engine.md)  
[x] Implementar lista virtualizada com infinite scroll para historico no frontend - [git_specs/history_engine.md](git_specs/history_engine.md)  
[x] Implementar host funcional do Git Panel em tela dedicada (nao pane do Command Center), acionado pelo botao GitHub da Empty State - [git_specs/product_scope.md](git_specs/product_scope.md)  
[x] Implementar layout base moderno/profissional do commit log: sidebar esquerda para branches/refs, lista de commits no centro e inspector na direita (responsivo) - [git_specs/ux_shortcuts.md](git_specs/ux_shortcuts.md)  
[x] Garantir que abrir/fechar tela Git nao mata, recria ou perde estado de terminais ativos - [git_specs/performance_reliability.md](git_specs/performance_reliability.md)  
[x] Implementar viewer de diff com modelo estruturado e modo inicial unified/split - [git_specs/diff_viewer.md](git_specs/diff_viewer.md)  
[x] Medir baseline e garantir budget inicial de latencia para abrir painel, historico e stage/unstage - [git_specs/performance_reliability.md](git_specs/performance_reliability.md)  
[x] Criar smoke tests obrigatorios de P0 (parser status, queue, bindings e build frontend) no CI - [git_specs/test_strategy.md](git_specs/test_strategy.md)  

## P1 - Core avancado

[x] Implementar stage parcial por hunk com geracao e aplicacao de patch confiavel - [git_specs/working_tree_staging.md](git_specs/working_tree_staging.md)  
[x] Implementar stage parcial por linhas com selecao multipla (`Shift+Click`) - [git_specs/working_tree_staging.md](git_specs/working_tree_staging.md)  
[x] Implementar scroll lock-step robusto no modo side-by-side - [git_specs/diff_viewer.md](git_specs/diff_viewer.md)  
[x] Implementar degradacao controlada para arquivos grandes e binarios no diff - [git_specs/diff_viewer.md](git_specs/diff_viewer.md)  
[x] Implementar painel de conflitos com deteccao por `MERGE_HEAD` e status de conflito - [git_specs/merge_conflict_management.md](git_specs/merge_conflict_management.md)  
[x] Implementar acoes `Accept Mine` e `Accept Theirs` com opcao de auto-stage - [git_specs/merge_conflict_management.md](git_specs/merge_conflict_management.md)  
[x] Integrar comandos do Git Panel com timeline/audit de `gitactivity` para manter rastreabilidade unica no ORCH - [git_specs/observability_security.md](git_specs/observability_security.md)  
[x] Implementar atalhos principais de produtividade (`Cmd+S`, `Cmd+Shift+S`, `J/K`, `Esc`) - [git_specs/ux_shortcuts.md](git_specs/ux_shortcuts.md)  
[x] Implementar feedback local de acao por item (`running/success/error`) em toda operacao Git - [git_specs/ux_shortcuts.md](git_specs/ux_shortcuts.md)  
[x] Implementar console de saida opcional com comando, duracao e resultado sanitizado - [git_specs/observability_security.md](git_specs/observability_security.md)  

## P2 - Hardening e qualidade de release

[x] Implementar filtros/busca no historico (autor/hash/subject) sem degradar performance - [git_specs/history_engine.md](git_specs/history_engine.md)  
[x] Implementar acessibilidade completa por teclado e ajustes de contraste no painel - [git_specs/ux_shortcuts.md](git_specs/ux_shortcuts.md)  
[x] Implementar suporte a abertura de ferramenta externa para merge conflict - [git_specs/merge_conflict_management.md](git_specs/merge_conflict_management.md)  
[x] Afinar fallback e caches para repositorios grandes e cenarios limite - [git_specs/performance_reliability.md](git_specs/performance_reliability.md)  
[x] Implementar suite de testes backend (parser, patch, queue, path validation, error contract) - [git_specs/test_strategy.md](git_specs/test_strategy.md)  
[x] Implementar suite de testes frontend (virtualizacao, estado de UI, atalhos, diffs) - [git_specs/test_strategy.md](git_specs/test_strategy.md)  
[x] Implementar testes E2E de fluxo completo (happy path, conflito, concorrencia write, arquivo grande/binario) - [git_specs/test_strategy.md](git_specs/test_strategy.md)  
[x] Validar readiness final por fase com KPIs, riscos abertos e criterio de aceite concluido - [git_specs/roadmap_delivery.md](git_specs/roadmap_delivery.md)  

## Gates finais (obrigatorio para marcar rollout)

[ ] `go test ./...` verde no CI e local - [git_specs/test_strategy.md](git_specs/test_strategy.md)  
[ ] `npm --prefix frontend run build` verde no CI e local - [git_specs/test_strategy.md](git_specs/test_strategy.md)  
[ ] E2E critico do Git Panel verde em ambiente limpo - [git_specs/test_strategy.md](git_specs/test_strategy.md)  
[x] Budget de performance validado com evidencias (latencia, CPU em burst de watcher, responsividade) - [git_specs/performance_reliability.md](git_specs/performance_reliability.md)  
